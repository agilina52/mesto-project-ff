{"version":3,"file":"main.js","mappings":"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","sources":["webpack://mesto-project-ff/./src/components/api.js","webpack://mesto-project-ff/./src/components/card.js","webpack://mesto-project-ff/./src/components/modal.js","webpack://mesto-project-ff/./src/components/validation.js","webpack://mesto-project-ff/./src/index.js"],"sourcesContent":["const config = {\r\n  baseUrl: \"https://nomoreparties.co/v1/wff-cohort-41\",\r\n  headers: {\r\n    authorization: \"0b29a7a6-71d4-445b-8202-2b632e1e043c\",\r\n    \"Content-Type\": \"application/json\",\r\n  },\r\n};\r\n\r\nconst response = (url, fetchOptions) => {\r\n  return new Promise((resolve, reject) => {\r\n    fetch(`${config.baseUrl}${url}`, fetchOptions)\r\n      .then((res) => {\r\n        if (!res.ok) {\r\n          console.log(\"Запрос не обработан\");\r\n          throw new Error(\"Error\");\r\n        }\r\n        return res.json();\r\n      })\r\n      .then((result) => {\r\n        console.log(result);\r\n        resolve(result);\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n        reject(\"Запрос отклонён\");\r\n      });\r\n  });\r\n};\r\n\r\nexport const deleteCardFromServer = (cardId) =>\r\n  response(`/cards/${cardId}`, {\r\n      method: \"DELETE\",\r\n      headers: config.headers,\r\n    });\r\n\r\nexport const like = (cardId) =>\r\n  response(`/cards/likes/${cardId}`, {\r\n      method: \"PUT\",\r\n      headers: config.headers,\r\n    });\r\n\r\nexport const unlike = (cardId) =>\r\n  response(`/cards/likes/${cardId}`, {\r\n      method: \"DELETE\",\r\n      headers: config.headers,\r\n    });\r\n\r\nexport const updateAvatar = (userPhotoLink) =>\r\n  response(`/users/me/avatar`, {\r\n      method: \"PATCH\",\r\n      headers: config.headers,\r\n      body: JSON.stringify({\r\n        avatar: userPhotoLink,\r\n      }),\r\n    });\r\n\r\nexport const updateProfile = (userProfile) =>\r\n  response(`/users/me`, {\r\n      method: \"PATCH\",\r\n      headers: config.headers,\r\n      body: JSON.stringify(userProfile),\r\n    });\r\n\r\nexport const addCard = (cardData) =>\r\n  response(`/cards`, {\r\n      method: \"POST\",\r\n      headers: config.headers,\r\n      body: JSON.stringify(cardData),\r\n    });\r\n\r\nexport const getUser = () =>\r\n  response(`/users/me`, {\r\n    method: \"GET\",\r\n    headers: config.headers,\r\n  });\r\n\r\nexport const getCards = () =>\r\n  response(`/cards`, {\r\n    headers: config.headers,\r\n  });","// Функция создания\r\nimport { deleteCardFromServer, like, unlike, updateAvatar } from \"./api\";\r\nconst cardTemplate = document.querySelector(\"#card-template\").content;\r\n\r\nexport function createCard(\r\n  cardData,\r\n  onDeleteCard,\r\n  onLikeCard,\r\n  onOpenImagePopup,\r\n  currentUser\r\n) {\r\n  const cardElement = cardTemplate.cloneNode(true);\r\n  const deleteButton = cardElement.querySelector(\".card__delete-button\");\r\n  const cardImage = cardElement.querySelector(\".card__image\");\r\n  const cardTitle = cardElement.querySelector(\".card__title\");\r\n  const likeButton = cardElement.querySelector(\".card__like-button\");\r\n  const likeCount = cardElement.querySelector(\".card__like-counter\");\r\n\r\n  cardImage.src = cardData.link;\r\n  cardImage.alt = `Изображение места: ${cardData.name}`;\r\n  cardTitle.textContent = cardData.name;\r\n  likeCount.textContent = cardData.likes.length;\r\n\r\n  if (currentUser._id !== cardData.owner._id) {\r\n    deleteButton.hidden = true;\r\n  }\r\n\r\n  if (cardData.likes.some((count) => count._id === currentUser._id)) {\r\n    likeButton.classList.add(\"card__like-button_is-active\");\r\n    console.log(cardData.likes, currentUser._id);\r\n  }\r\n\r\n  deleteButton.addEventListener(\"click\", () =>\r\n    onDeleteCard(deleteButton, cardData._id)\r\n  );\r\n  likeButton.addEventListener(\"click\", () =>\r\n    onLikeCard(cardData._id, likeButton, likeCount)\r\n  );\r\n  cardImage.addEventListener(\"click\", () => {\r\n    const cardData = {\r\n      src: cardImage.src,\r\n      alt: cardImage.alt,\r\n    };\r\n    onOpenImagePopup(cardData);\r\n  });\r\n\r\n  return cardElement;\r\n}\r\n\r\nexport function likeCard(id, likeButton, likeCount) {\r\n  if (likeButton.classList.contains(\"card__like-button_is-active\")) {\r\n    likeButton.classList.remove(\"card__like-button_is-active\");\r\n    unlike(id).then((result) => {\r\n      likeCount.textContent = result.likes.length;\r\n    });\r\n  } else {\r\n    likeButton.classList.add(\"card__like-button_is-active\");\r\n    like(id).then((result) => {\r\n      likeCount.textContent = result.likes.length;\r\n    });\r\n  }\r\n}\r\n\r\nexport function deleteCard(deleteButton, id) {\r\n  deleteCardFromServer(id);\r\n  const cardDelete = deleteButton.closest(\".card\");\r\n  cardDelete.remove();\r\n}\r\n","function closeEscape(event) {\r\n  if (event.key === \"Escape\") {\r\n    const openedModal = document.querySelector(\".popup_is-opened\");\r\n    if (openedModal) {\r\n      closeModal(openedModal);\r\n    }\r\n  }\r\n}\r\n\r\nexport function closeModal(modal) {\r\n  modal.classList.add(\"popup_is-animated\");\r\n  modal.classList.remove(\"popup_is-opened\");\r\n  document.removeEventListener(\"keydown\", closeEscape);\r\n}\r\n\r\nexport function openModal(modal) {\r\n  modal.classList.add(\"popup_is-opened\");\r\n  document.addEventListener(\"keydown\", closeEscape);\r\n}\r\n\r\nexport function closeOverlay(event) {\r\n  if (event.target.classList.contains(\"popup_is-opened\")) {\r\n    closeModal(event.target);\r\n  }\r\n}\r\n\r\nexport function closeBtn(event) {\r\n  if (event.target.classList.contains(\"popup__close\")) {\r\n    const modal = event.target.closest(\".popup_is-opened\");\r\n    closeModal(modal);\r\n  }\r\n}\r\n","// Функция показа ошибки\r\nexport const showInputError = (\r\n  formElement,\r\n  inputElement,\r\n  errorMessage,\r\n  options\r\n) => {\r\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\r\n  console.log(\"!\");\r\n  inputElement.classList.add(options.inputErrorClass);\r\n  errorElement.textContent = errorMessage;\r\n  errorElement.classList.add(options.errorClass);\r\n  console.log(\"ошибка\");\r\n};\r\n\r\n// Функция скрытия ошибки\r\nexport const hideInputError = (formElement, inputElement, options) => {\r\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\r\n  console.log();\r\n  inputElement.classList.remove(options.inputErrorClass);\r\n  errorElement.classList.remove(options.errorClass);\r\n  errorElement.textContent = \"\";\r\n};\r\n\r\n// Функция проверки валидности\r\nexport const isValid = (formElement, inputElement, options) => {\r\n  if (inputElement.validity.patternMismatch) {\r\n    inputElement.setCustomValidity(inputElement.dataset.errorMessage);\r\n  } else {\r\n    inputElement.setCustomValidity(\"\");\r\n  }\r\n  if (!inputElement.validity.valid) {\r\n    showInputError(\r\n      formElement,\r\n      inputElement,\r\n      inputElement.validationMessage,\r\n      options\r\n    );\r\n  } else {\r\n    hideInputError(formElement, inputElement, options);\r\n  }\r\n};\r\n\r\n// Проверка на невалидные поля//\r\nexport const hasInvalidInput = (inputList) => {\r\n  return inputList.some((inputElement) => {\r\n    return !inputElement.validity.valid;\r\n  });\r\n};\r\n\r\n// Переключение состояния кнопки\r\nexport const toggleButtonState = (inputList, buttonElement, options) => {\r\n  if (hasInvalidInput(inputList)) {\r\n    buttonElement.disabled = true;\r\n    buttonElement.classList.add(options.inactiveButtonClass);\r\n  } else {\r\n    buttonElement.disabled = false;\r\n    buttonElement.classList.remove(options.inactiveButtonClass);\r\n  }\r\n};\r\n\r\n// Установка обработчиков событий валидации\r\nexport const setEventListeners = (formElement, options) => {\r\n  const inputList = Array.from(\r\n    formElement.querySelectorAll(options.inputSelector)\r\n  );\r\n  const buttonElement = formElement.querySelector(options.submitButtonSelector);\r\n  \r\n  // Инициализация состояния кнопки\r\n  toggleButtonState(inputList, buttonElement, options);\r\n\r\n  inputList.forEach((inputElement) => {\r\n    inputElement.addEventListener(\"input\", () => {\r\n      isValid(formElement, inputElement, options);\r\n      toggleButtonState(inputList, buttonElement, options);\r\n    });\r\n  });\r\n};\r\n\r\n// Включение валидации для всех форм\r\nexport const enableValidation = (options) => {\r\n  const formList = Array.from(document.querySelectorAll(options.formSelector));\r\n\r\n  formList.forEach((formElement) => {\r\n    formElement.addEventListener(\"submit\", (evt) => {\r\n      evt.preventDefault();\r\n    });\r\n\r\n    setEventListeners(formElement, options);\r\n  });\r\n};\r\n\r\nexport const clearValidation = function (modalForm, options) {\r\n  const formInputList = Array.from(\r\n    modalForm.querySelectorAll(options.inputSelector)\r\n  );\r\n  formInputList.forEach((formInput) => {\r\n    hideInputError(modalForm, formInput, options);\r\n  });\r\n};\r\n","import \"./pages/index.css\";\r\nimport { createCard, likeCard, deleteCard } from \"./components/card.js\";\r\nimport {\r\n  closeModal,\r\n  openModal,\r\n  closeOverlay,\r\n  closeBtn,\r\n} from \"./components/modal.js\";\r\nimport {\r\n  enableValidation,\r\n  toggleButtonState,\r\n  clearValidation,\r\n} from \"./components/validation.js\";\r\nimport {\r\n  updateAvatar,\r\n  addCard,\r\n  getUser,\r\n  getCards,\r\n  updateProfile,\r\n} from \"./components/api.js\";\r\n\r\nlet currentUser = null;\r\nconst cardList = document.querySelector(\".places__list\");\r\n\r\n// Модальные окна\r\nconst modals = document.querySelectorAll(\".popup\");\r\nconst modalEditProfile = document.querySelector(\".popup_type_edit\");\r\nconst modalAddCard = document.querySelector(\".popup_type_new-card\");\r\nconst modalImage = document.querySelector(\".popup_type_image\");\r\nconst inputNameFormNewCard = modalAddCard.querySelector(\r\n  \".popup__input_type_card-name\"\r\n);\r\nconst inputLinkFormNewCard = modalAddCard.querySelector(\r\n  \".popup__input_type_url\"\r\n);\r\nconst modalImageContent = modalImage.querySelector(\".popup__image\");\r\nconst modalImageCaption = modalImage.querySelector(\".popup__caption\");\r\nconst modalEditAvatar = document.querySelector(\".popup_type_edit-avatar\");\r\n\r\n// Кнопки открытия модальных форм\r\nconst buttonEditProfile = document.querySelector(\".profile__edit-button\");\r\nconst buttonAddCard = document.querySelector(\".profile__add-button\");\r\nconst buttonEditAvatar = document.querySelector(\".avatar__edit-button\");\r\n\r\n// Формы модальных окон\r\nconst formModalAddCard = modalAddCard.querySelector(\".popup__form\");\r\nconst formEditProfile = modalEditProfile.querySelector(\".popup__form\");\r\nconst formEditAvatar = modalEditAvatar.querySelector(\".popup__form\");\r\n\r\nconst profileNameInput = formEditProfile.querySelector(\r\n  \".popup__input_type_name\"\r\n);\r\nconst jobInput = formEditProfile.querySelector(\r\n  \".popup__input_type_description\"\r\n);\r\n\r\nconst validationOptions = {\r\n  formSelector: \".popup__form\",\r\n  inputSelector: \".popup__input\",\r\n  submitButtonSelector: \".popup__button\",\r\n  inactiveButtonClass: \"popup__button_disabled\",\r\n  inputErrorClass: \"popup__input_type_error\",\r\n  errorClass: \"popup__error_visible\",\r\n};\r\n\r\nfunction openImagePopup(cardData) {\r\n  modalImageContent.src = cardData.src;\r\n  modalImageContent.alt = cardData.alt;\r\n  modalImageCaption.textContent = cardData.alt.replace(\r\n    \"Изображение места: \",\r\n    \"\"\r\n  );\r\n\r\n  openModal(modalImage);\r\n}\r\n\r\nfunction fillProfileForm() {\r\n  profileNameInput.value = currentUser.name;\r\n  jobInput.value = currentUser.about;\r\n}\r\n\r\n// Заполнение шапки профиля\r\nfunction fillUserHeader(userProfile) {\r\n  const userName = document.querySelector(\".profile__title\");\r\n  const userAbout = document.querySelector(\".profile__description\");\r\n  const userAvatar = document.querySelector(\".profile__image\");\r\n  userName.textContent = userProfile.name;\r\n  userAbout.textContent = userProfile.about;\r\n  userAvatar.style.backgroundImage = `url(\"${userProfile.avatar}\")`;\r\n}\r\n\r\n\r\nconst handleFormSubmitProfile = (evt) => {\r\n  evt.preventDefault();\r\n  const buttonSave = modalEditProfile.querySelector(\".popup__button\");\r\n  const textButton = buttonSave.textContent;\r\n  buttonSave.textContent = \"Сохранить...\";\r\n\r\n  const nameValue = profileNameInput.value;\r\n  const jobValue = jobInput.value;\r\n\r\n  closeModal(modalEditProfile);\r\n  updateProfile({\r\n    name: nameValue,\r\n    about: jobValue,\r\n  })\r\n    .then((result) => {\r\n      console.log(result);\r\n      fillUserHeader(result);\r\n    })\r\n    .catch((error) => {\r\n      console.log(error);\r\n    })\r\n    .finally(() => {\r\n      buttonSave.textContent = textButton;\r\n      closeModal(modalAddCard);\r\n    });\r\n};\r\n\r\nconst handleFormSubmitNewCard = (evt) => {\r\n  evt.preventDefault();\r\n  const buttonSave = modalAddCard.querySelector(\".popup__button\");\r\n  const textButton = buttonSave.textContent;\r\n  buttonSave.textContent = \"Сохранить...\";\r\n\r\n  const newCardData = {\r\n    name: inputNameFormNewCard.value,\r\n    link: inputLinkFormNewCard.value,\r\n  };\r\n\r\n  addCard(newCardData)\r\n    .then((result) => {\r\n      const cardElement = createCard(\r\n        result,\r\n        deleteCard,\r\n        likeCard,\r\n        openImagePopup,\r\n        currentUser\r\n      );\r\n\r\n      cardList.prepend(cardElement);\r\n      console.log(result);\r\n    })\r\n    .catch((error) => {\r\n      console.log(\"Ошибка при создании карточки:\", error);\r\n    })\r\n    .finally(() => {\r\n      buttonSave.textContent = textButton;\r\n      inputNameFormNewCard.value = \"\";\r\n      inputLinkFormNewCard.value = \"\";\r\n      closeModal(modalAddCard);\r\n    });\r\n};\r\n\r\nconst handleFormSubmitAvatar = (evt) => {\r\n  evt.preventDefault();\r\n  const urlAvatarInput = modalEditAvatar.querySelector(\r\n    \".popup__input_type_url-avatar\"\r\n  );\r\n  const userAvatar = document.querySelector(\".profile__image\");\r\n  const buttonSave = modalEditAvatar.querySelector(\".popup__button\");\r\n  const textButton = buttonSave.textContent;\r\n  buttonSave.textContent = \"Сохранить...\";\r\n\r\n  const urlAvatarValue = urlAvatarInput.value;\r\n  updateAvatar(urlAvatarValue)\r\n    .then((result) => {\r\n      console.log(result);\r\n      userAvatar.style.backgroundImage = `url(\"${result.avatar}\")`;\r\n    })\r\n    .catch(function (error) {\r\n      console.log(error);\r\n    })\r\n    .finally(function () {\r\n      buttonSave.textContent = textButton;\r\n      closeModal(modalEditAvatar);\r\n    });\r\n};\r\n\r\n// Открытие модального окна редактирования автара\r\nbuttonEditAvatar.addEventListener(\"click\", () => {\r\n  openModal(modalEditAvatar);\r\n  clearValidation(modalEditAvatar, validationOptions);\r\n});\r\n\r\n// Открытие модального окна профиля\r\nbuttonEditProfile.addEventListener(\"click\", () => {\r\n  fillProfileForm();\r\n  openModal(modalEditProfile);\r\n  clearValidation(modalEditProfile, validationOptions);\r\n});\r\n\r\n// Открытие модального окна добавления карточки\r\nbuttonAddCard.addEventListener(\"click\", () => {\r\n  openModal(modalAddCard);\r\n  const inputList = Array.from(\r\n    modalAddCard.querySelector(validationOptions.formSelector)\r\n  );\r\n  const buttonElement = modalAddCard.querySelector(\r\n    validationOptions.submitButtonSelector\r\n  );\r\n  toggleButtonState(inputList, buttonElement, validationOptions);\r\n});\r\n\r\nformModalAddCard.addEventListener(\"submit\", handleFormSubmitNewCard);\r\nformEditProfile.addEventListener(\"submit\", handleFormSubmitProfile);\r\nformEditAvatar.addEventListener(\"submit\", handleFormSubmitAvatar);\r\n\r\n// Прослушиватель нажатия по оверлею и по кнопке\r\nmodals.forEach((modal) => {\r\n  modal.addEventListener(\"click\", closeOverlay);\r\n  modal.addEventListener(\"click\", closeBtn);\r\n});\r\n\r\nenableValidation(validationOptions);\r\n\r\n// массив промисов\r\nconst promises = [getUser(), getCards()];\r\nPromise.all(promises)\r\n  .then((results) => {\r\n    console.log(results);\r\n    currentUser = results[0];\r\n    results[1].forEach(function (element) {\r\n      const cardElement = createCard(\r\n        element,\r\n        deleteCard,\r\n        likeCard,\r\n        openImagePopup,\r\n        currentUser\r\n      );\r\n      cardList.append(cardElement);\r\n    });\r\n    fillUserHeader(results[0]);\r\n  })\r\n  .catch((err) => {\r\n    console.log(err);\r\n  });\r\n"],"names":["config","baseUrl","headers","authorization","response","url","fetchOptions","Promise","resolve","reject","fetch","concat","then","res","ok","console","log","Error","json","result","catch","error","cardTemplate","document","querySelector","content","createCard","cardData","onDeleteCard","onLikeCard","onOpenImagePopup","currentUser","cardElement","cloneNode","deleteButton","cardImage","cardTitle","likeButton","likeCount","src","link","alt","name","textContent","likes","length","_id","owner","hidden","some","count","classList","add","addEventListener","likeCard","id","cardId","contains","remove","method","like","deleteCard","closest","closeEscape","event","key","openedModal","closeModal","modal","removeEventListener","openModal","closeOverlay","target","closeBtn","options","hideInputError","formElement","inputElement","errorElement","inputErrorClass","errorClass","toggleButtonState","inputList","buttonElement","validity","valid","hasInvalidInput","disabled","inactiveButtonClass","clearValidation","modalForm","Array","from","querySelectorAll","inputSelector","forEach","formInput","cardList","modals","modalEditProfile","modalAddCard","modalImage","inputNameFormNewCard","inputLinkFormNewCard","modalImageContent","modalImageCaption","modalEditAvatar","buttonEditProfile","buttonAddCard","buttonEditAvatar","formModalAddCard","formEditProfile","formEditAvatar","profileNameInput","jobInput","validationOptions","formSelector","submitButtonSelector","openImagePopup","replace","fillUserHeader","userProfile","userName","userAbout","userAvatar","about","style","backgroundImage","avatar","value","evt","preventDefault","buttonSave","textButton","body","JSON","stringify","prepend","finally","nameValue","jobValue","userPhotoLink","urlAvatarInput","patternMismatch","setCustomValidity","dataset","errorMessage","showInputError","validationMessage","isValid","setEventListeners","promises","all","results","element","append","err"],"sourceRoot":""}