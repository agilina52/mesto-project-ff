{"version":3,"file":"main.js","mappings":"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","sources":["webpack://mesto-project-ff/./src/components/api.js","webpack://mesto-project-ff/./src/components/card.js","webpack://mesto-project-ff/./src/components/modal.js","webpack://mesto-project-ff/./src/components/validation.js","webpack://mesto-project-ff/./src/index.js"],"sourcesContent":["const config = {\r\n  baseUrl: \"https://nomoreparties.co/v1/wff-cohort-41\",\r\n  headers: {\r\n    authorization: \"0b29a7a6-71d4-445b-8202-2b632e1e043c\",\r\n    \"Content-Type\": \"application/json\",\r\n  },\r\n};\r\n\r\nconst response = (url, fetchOptions) => {\r\n  return fetch(`${config.baseUrl}${url}`, fetchOptions)\r\n      .then(res => {\r\n      if (res.ok) {\r\n        return res.json();\r\n      }\r\n\r\n      // если ошибка, отклоняем промис\r\n      return Promise.reject(`Ошибка: ${res.status}`);\r\n    });\r\n  };\r\n\r\nexport const deleteCardFromServer = (cardId) =>\r\n  response(`/cards/${cardId}`, {\r\n      method: \"DELETE\",\r\n      headers: config.headers,\r\n    });\r\n\r\nexport const setLikeCard = (cardId) =>\r\n  response(`/cards/likes/${cardId}`, {\r\n      method: \"PUT\",\r\n      headers: config.headers,\r\n    });\r\n\r\nexport const setUnlikeCard = (cardId) =>\r\n  response(`/cards/likes/${cardId}`, {\r\n      method: \"DELETE\",\r\n      headers: config.headers,\r\n    });\r\n\r\nexport const updateAvatar = (userPhotoLink) =>\r\n  response(`/users/me/avatar`, {\r\n      method: \"PATCH\",\r\n      headers: config.headers,\r\n      body: JSON.stringify({\r\n        avatar: userPhotoLink,\r\n      }),\r\n    });\r\n\r\nexport const updateProfile = (userProfile) =>\r\n  response(`/users/me`, {\r\n      method: \"PATCH\",\r\n      headers: config.headers,\r\n      body: JSON.stringify(userProfile),\r\n    });\r\n\r\nexport const addCard = (cardData) =>\r\n  response(`/cards`, {\r\n      method: \"POST\",\r\n      headers: config.headers,\r\n      body: JSON.stringify(cardData),\r\n    });\r\n\r\nexport const getUser = () =>\r\n  response(`/users/me`, {\r\n    method: \"GET\",\r\n    headers: config.headers,\r\n  });\r\n\r\nexport const getCards = () =>\r\n  response(`/cards`, {\r\n    headers: config.headers,\r\n  });","// Функция создания\r\nimport { deleteCardFromServer, setLikeCard, setUnlikeCard } from \"./api\";\r\nconst cardTemplate = document.querySelector(\"#card-template\").content;\r\n\r\nexport function createCard(\r\n  cardData,\r\n  onDeleteCard,\r\n  onLikeCard,\r\n  onOpenImagePopup,\r\n  currentUser\r\n) {\r\n  const cardElement = cardTemplate.cloneNode(true);\r\n  const deleteButton = cardElement.querySelector(\".card__delete-button\");\r\n  const cardImage = cardElement.querySelector(\".card__image\");\r\n  const cardTitle = cardElement.querySelector(\".card__title\");\r\n  const likeButton = cardElement.querySelector(\".card__like-button\");\r\n  const likeCount = cardElement.querySelector(\".card__like-counter\");\r\n\r\n  cardImage.src = cardData.link;\r\n  cardImage.alt = `Изображение места: ${cardData.name}`;\r\n  cardTitle.textContent = cardData.name;\r\n  likeCount.textContent = cardData.likes.length;\r\n\r\n  if (currentUser._id !== cardData.owner._id) {\r\n    deleteButton.hidden = true;\r\n  }\r\n\r\n  if (cardData.likes.some((count) => count._id === currentUser._id)) {\r\n    likeButton.classList.add(\"card__like-button_is-active\");\r\n    console.log(cardData.likes, currentUser._id);\r\n  }\r\n\r\n  deleteButton.addEventListener(\"click\", () =>\r\n    onDeleteCard(deleteButton, cardData._id)\r\n  );\r\n  likeButton.addEventListener(\"click\", () =>\r\n    onLikeCard(cardData._id, likeButton, likeCount)\r\n  );\r\n  cardImage.addEventListener(\"click\", () => {\r\n    const cardData = {\r\n      src: cardImage.src,\r\n      alt: cardImage.alt,\r\n    };\r\n    onOpenImagePopup(cardData);\r\n  });\r\n\r\n  return cardElement;\r\n}\r\n\r\nexport function likeCard(id, likeButton, likeCount) {\r\n  if (likeButton.classList.contains(\"card__like-button_is-active\")) {\r\n    likeButton.classList.remove(\"card__like-button_is-active\");\r\n    setUnlikeCard(id)\r\n      .then((result) => {\r\n        likeCount.textContent = result.likes.length;\r\n      })\r\n      .catch((error) => {\r\n        console.log(\"Ошибка снятия лайка карточки\", error);\r\n      });\r\n  } else {\r\n    likeButton.classList.add(\"card__like-button_is-active\");\r\n    setLikeCard(id)\r\n      .then((result) => {\r\n        likeCount.textContent = result.likes.length;\r\n      })\r\n      .catch((error) => {\r\n        console.log(\"Ошибка добавления лайка карточки\", error);\r\n      });\r\n  }\r\n}\r\n\r\nexport function deleteCard(deleteButton, id) {\r\n  const cardDelete = deleteButton.closest(\".card\");\r\n  deleteCardFromServer(id)\r\n    .then(() => {\r\n      cardDelete.remove();\r\n    })\r\n    .catch((error) => {\r\n      console.log(\"Ошибка при удалении карточки\", error);\r\n    });\r\n}\r\n\r\n","function closeEscape(event) {\r\n  if (event.key === \"Escape\") {\r\n    const openedModal = document.querySelector(\".popup_is-opened\");\r\n    if (openedModal) {\r\n      closeModal(openedModal);\r\n    }\r\n  }\r\n}\r\n\r\nexport function closeModal(modal) {\r\n  modal.classList.add(\"popup_is-animated\");\r\n  modal.classList.remove(\"popup_is-opened\");\r\n  document.removeEventListener(\"keydown\", closeEscape);\r\n}\r\n\r\nexport function openModal(modal) {\r\n  modal.classList.add(\"popup_is-opened\");\r\n  document.addEventListener(\"keydown\", closeEscape);\r\n}\r\n\r\nexport function closeOverlay(event) {\r\n  if (event.target.classList.contains(\"popup_is-opened\")) {\r\n    closeModal(event.target);\r\n  }\r\n}\r\n\r\nexport function closeBtn(event) {\r\n  if (event.target.classList.contains(\"popup__close\")) {\r\n    const modal = event.target.closest(\".popup_is-opened\");\r\n    closeModal(modal);\r\n  }\r\n}\r\n\r\n","// Функция показа ошибки\r\nexport const showInputError = (\r\n  formElement,\r\n  inputElement,\r\n  errorMessage,\r\n  options\r\n) => {\r\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\r\n  inputElement.classList.add(options.inputErrorClass);\r\n  errorElement.textContent = errorMessage;\r\n  errorElement.classList.add(options.errorClass);\r\n};\r\n\r\n// Функция скрытия ошибки\r\nexport const hideInputError = (formElement, inputElement, options) => {\r\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\r\n  inputElement.classList.remove(options.inputErrorClass);\r\n  errorElement.classList.remove(options.errorClass);\r\n  errorElement.textContent = \"\";\r\n};\r\n\r\n// Функция проверки валидности\r\nexport const isValid = (formElement, inputElement, options) => {\r\n  if (inputElement.validity.patternMismatch) {\r\n    inputElement.setCustomValidity(inputElement.dataset.errorMessage);\r\n  } else {\r\n    inputElement.setCustomValidity(\"\");\r\n  }\r\n  if (!inputElement.validity.valid) {\r\n    showInputError(\r\n      formElement,\r\n      inputElement,\r\n      inputElement.validationMessage,\r\n      options\r\n    );\r\n  } else {\r\n    hideInputError(formElement, inputElement, options);\r\n  }\r\n};\r\n\r\n// Проверка на невалидные поля//\r\nexport const hasInvalidInput = (inputList) => {\r\n  return inputList.some((inputElement) => {\r\n    return !inputElement.validity.valid;\r\n  });\r\n};\r\n\r\n// Переключение состояния кнопки\r\nexport const toggleButtonState = (inputList, buttonElement, options) => {\r\n  if (hasInvalidInput(inputList)) {\r\n    buttonElement.disabled = true;\r\n    buttonElement.classList.add(options.inactiveButtonClass);\r\n  } else {\r\n    buttonElement.disabled = false;\r\n    buttonElement.classList.remove(options.inactiveButtonClass);\r\n  }\r\n};\r\n\r\n// Установка обработчиков событий валидации\r\nexport const setEventListeners = (formElement, options) => {\r\n  const inputList = Array.from(\r\n    formElement.querySelectorAll(options.inputSelector)\r\n  );\r\n  const buttonElement = formElement.querySelector(options.submitButtonSelector);\r\n\r\n  // Инициализация состояния кнопки\r\n  toggleButtonState(inputList, buttonElement, options);\r\n\r\n  inputList.forEach((inputElement) => {\r\n    inputElement.addEventListener(\"input\", () => {\r\n      isValid(formElement, inputElement, options);\r\n      toggleButtonState(inputList, buttonElement, options);\r\n    });\r\n  });\r\n};\r\n\r\n// Включение валидации для всех форм\r\nexport const enableValidation = (options) => {\r\n  const formList = Array.from(document.querySelectorAll(options.formSelector));\r\n\r\n  formList.forEach((formElement) => {\r\n    setEventListeners(formElement, options);\r\n  });\r\n};\r\n\r\nexport const clearValidation = function (modalForm, options) {\r\n  const formInputList = Array.from(\r\n    modalForm.querySelectorAll(options.inputSelector)\r\n  );\r\n  formInputList.forEach((formInput) => {\r\n    hideInputError(modalForm, formInput, options);\r\n  });\r\n  const buttonElement = modalForm.querySelector(\r\n    options.submitButtonSelector\r\n  );\r\n  toggleButtonState(formInputList, buttonElement, options);\r\n};\r\n","import \"./pages/index.css\";\r\nimport { createCard, likeCard, deleteCard } from \"./components/card.js\";\r\nimport {\r\n  closeModal,\r\n  openModal,\r\n  closeOverlay,\r\n  closeBtn,\r\n} from \"./components/modal.js\";\r\nimport { enableValidation, clearValidation } from \"./components/validation.js\";\r\nimport {\r\n  updateAvatar,\r\n  addCard,\r\n  getUser,\r\n  getCards,\r\n  updateProfile,\r\n} from \"./components/api.js\";\r\n\r\nlet currentUser = null;\r\nconst cardList = document.querySelector(\".places__list\");\r\n\r\n// Модальные окна\r\nconst modals = document.querySelectorAll(\".popup\");\r\nconst modalEditProfile = document.querySelector(\".popup_type_edit\");\r\nconst modalAddCard = document.querySelector(\".popup_type_new-card\");\r\nconst modalImage = document.querySelector(\".popup_type_image\");\r\nconst inputNameFormNewCard = modalAddCard.querySelector(\r\n  \".popup__input_type_card-name\"\r\n);\r\nconst inputLinkFormNewCard = modalAddCard.querySelector(\r\n  \".popup__input_type_url\"\r\n);\r\nconst modalImageContent = modalImage.querySelector(\".popup__image\");\r\nconst modalImageCaption = modalImage.querySelector(\".popup__caption\");\r\nconst modalEditAvatar = document.querySelector(\".popup_type_edit-avatar\");\r\n\r\n// Кнопки открытия модальных форм\r\nconst buttonEditProfile = document.querySelector(\".profile__edit-button\");\r\nconst buttonAddCard = document.querySelector(\".profile__add-button\");\r\nconst buttonEditAvatar = document.querySelector(\".avatar__edit-button\");\r\n\r\n// Формы модальных окон\r\nconst formModalAddCard = modalAddCard.querySelector(\".popup__form\");\r\nconst formEditProfile = modalEditProfile.querySelector(\".popup__form\");\r\nconst formEditAvatar = modalEditAvatar.querySelector(\".popup__form\");\r\n\r\nconst profileNameInput = formEditProfile.querySelector(\r\n  \".popup__input_type_name\"\r\n);\r\nconst jobInput = formEditProfile.querySelector(\r\n  \".popup__input_type_description\"\r\n);\r\n\r\nconst validationOptions = {\r\n  formSelector: \".popup__form\",\r\n  inputSelector: \".popup__input\",\r\n  submitButtonSelector: \".popup__button\",\r\n  inactiveButtonClass: \"popup__button_disabled\",\r\n  inputErrorClass: \"popup__input_type_error\",\r\n  errorClass: \"popup__error_visible\",\r\n};\r\n\r\nfunction openImagePopup(cardData) {\r\n  modalImageContent.src = cardData.src;\r\n  modalImageContent.alt = cardData.alt;\r\n  modalImageCaption.textContent = cardData.alt.replace(\r\n    \"Изображение места: \",\r\n    \"\"\r\n  );\r\n\r\n  openModal(modalImage);\r\n}\r\n\r\nfunction fillProfileForm() {\r\n  profileNameInput.value = currentUser.name;\r\n  jobInput.value = currentUser.about;\r\n}\r\n\r\n// Заполнение шапки профиля\r\nfunction fillUserHeader(userProfile) {\r\n  const userName = document.querySelector(\".profile__title\");\r\n  const userAbout = document.querySelector(\".profile__description\");\r\n  const userAvatar = document.querySelector(\".profile__image\");\r\n  userName.textContent = userProfile.name;\r\n  userAbout.textContent = userProfile.about;\r\n  userAvatar.style.backgroundImage = `url(\"${userProfile.avatar}\")`;\r\n}\r\n\r\nconst handleFormSubmitProfile = (evt) => {\r\n  evt.preventDefault();\r\n  const buttonSave = modalEditProfile.querySelector(\".popup__button\");\r\n  setLoadingState(buttonSave, true);\r\n\r\n  const nameValue = profileNameInput.value;\r\n  const jobValue = jobInput.value;\r\n\r\n  updateProfile({\r\n    name: nameValue,\r\n    about: jobValue,\r\n  })\r\n    .then((result) => {\r\n      currentUser = result;\r\n      fillUserHeader(result);\r\n      closeModal(modalEditProfile);\r\n    })\r\n    .catch((error) => {\r\n      console.log(\"Ошибка при редактировании формы профиля\", error);\r\n    })\r\n    .finally(() => {\r\n      setLoadingState(buttonSave, false);\r\n    });\r\n};\r\n\r\nconst handleFormSubmitNewCard = (evt) => {\r\n  evt.preventDefault();\r\n  const buttonSave = modalAddCard.querySelector(\".popup__button\");\r\n  setLoadingState(buttonSave, true);\r\n\r\n  const newCardData = {\r\n    name: inputNameFormNewCard.value,\r\n    link: inputLinkFormNewCard.value,\r\n  };\r\n\r\n  addCard(newCardData)\r\n    .then((result) => {\r\n      const cardElement = createCard(\r\n        result,\r\n        deleteCard,\r\n        likeCard,\r\n        openImagePopup,\r\n        currentUser\r\n      );\r\n\r\n      cardList.prepend(cardElement);\r\n      console.log(result);\r\n      inputNameFormNewCard.value = \"\";\r\n      inputLinkFormNewCard.value = \"\";\r\n      closeModal(modalAddCard);\r\n    })\r\n    .catch((error) => {\r\n      console.log(\"Ошибка при создании карточки\", error);\r\n    })\r\n    .finally(() => {\r\n      setLoadingState(buttonSave, false);\r\n    });\r\n};\r\n\r\nconst handleFormSubmitAvatar = (evt) => {\r\n  evt.preventDefault();\r\n  const urlAvatarInput = modalEditAvatar.querySelector(\r\n    \".popup__input_type_url-avatar\"\r\n  );\r\n  const userAvatar = document.querySelector(\".profile__image\");\r\n  const buttonSave = modalEditAvatar.querySelector(\".popup__button\");\r\n  setLoadingState(buttonSave, true);\r\n\r\n  const urlAvatarValue = urlAvatarInput.value;\r\n  updateAvatar(urlAvatarValue)\r\n    .then((result) => {\r\n      console.log(result);\r\n      userAvatar.style.backgroundImage = `url(\"${result.avatar}\")`;\r\n      closeModal(modalEditAvatar);\r\n    })\r\n    .catch((error) => {\r\n      console.log((\"Ошибка при редактировании аватара\", error));\r\n    })\r\n    .finally(() => {\r\n      setLoadingState(buttonSave, false);\r\n    });\r\n};\r\n\r\nconst handleButtonEditAvatar = () => {\r\n  clearValidation(modalEditAvatar, validationOptions);\r\n  openModal(modalEditAvatar);\r\n};\r\n\r\nconst handleButtonEditProfile = () => {\r\n  fillProfileForm();\r\n  clearValidation(modalEditProfile, validationOptions);\r\n  openModal(modalEditProfile);\r\n};\r\n\r\nconst handleButtonAddCard = () => {\r\n  cleanUpForm(modalAddCard);\r\n  clearValidation(modalAddCard, validationOptions);\r\n  openModal(modalAddCard);\r\n};\r\n\r\nbuttonEditAvatar.addEventListener(\"click\", handleButtonEditAvatar);\r\nbuttonEditProfile.addEventListener(\"click\", handleButtonEditProfile);\r\nbuttonAddCard.addEventListener(\"click\", handleButtonAddCard);\r\n\r\nformModalAddCard.addEventListener(\"submit\", handleFormSubmitNewCard);\r\nformEditProfile.addEventListener(\"submit\", handleFormSubmitProfile);\r\nformEditAvatar.addEventListener(\"submit\", handleFormSubmitAvatar);\r\n\r\n// Прослушиватель нажатия по оверлею и по кнопке\r\nmodals.forEach((modal) => {\r\n  modal.addEventListener(\"click\", closeOverlay);\r\n  modal.addEventListener(\"click\", closeBtn);\r\n});\r\n\r\nenableValidation(validationOptions);\r\n\r\n// массив промисов\r\nconst promises = [getUser(), getCards()];\r\nPromise.all(promises)\r\n  .then((results) => {\r\n    const [user, cards] = results;\r\n    currentUser = user;\r\n    cards.forEach(function (element) {\r\n      const cardElement = createCard(\r\n        element,\r\n        deleteCard,\r\n        likeCard,\r\n        openImagePopup,\r\n        currentUser\r\n      );\r\n      cardList.append(cardElement);\r\n    });\r\n    fillUserHeader(user);\r\n  })\r\n  .catch((err) => {\r\n    console.log(\"Ошибка\", err);\r\n  });\r\n\r\n  function setLoadingState(\r\n  buttonElement,\r\n  isLoading,\r\n  defaultText = \"Сохранить\",\r\n  loadingText = \"Сохранение...\"\r\n) {\r\n  buttonElement.textContent = isLoading ? loadingText : defaultText;\r\n  buttonElement.disabled = isLoading;\r\n}\r\n\r\nfunction cleanUpForm(formElement) {\r\n  const inputList = Array.from(formElement.querySelectorAll(\"input\"));\r\n  inputList.forEach(element => {\r\n    element.value = \"\";\r\n  })\r\n}"],"names":["config","baseUrl","headers","authorization","response","url","fetchOptions","fetch","concat","then","res","ok","json","Promise","reject","status","cardTemplate","document","querySelector","content","createCard","cardData","onDeleteCard","onLikeCard","onOpenImagePopup","currentUser","cardElement","cloneNode","deleteButton","cardImage","cardTitle","likeButton","likeCount","src","link","alt","name","textContent","likes","length","_id","owner","hidden","some","count","classList","add","console","log","addEventListener","likeCard","id","cardId","contains","remove","method","result","catch","error","setLikeCard","deleteCard","cardDelete","closest","closeEscape","event","key","openedModal","closeModal","modal","removeEventListener","openModal","closeOverlay","target","closeBtn","hideInputError","formElement","inputElement","options","errorElement","inputErrorClass","errorClass","toggleButtonState","inputList","buttonElement","validity","valid","hasInvalidInput","disabled","inactiveButtonClass","clearValidation","modalForm","formInputList","Array","from","querySelectorAll","inputSelector","forEach","formInput","submitButtonSelector","cardList","modals","modalEditProfile","modalAddCard","modalImage","inputNameFormNewCard","inputLinkFormNewCard","modalImageContent","modalImageCaption","modalEditAvatar","buttonEditProfile","buttonAddCard","buttonEditAvatar","formModalAddCard","formEditProfile","formEditAvatar","profileNameInput","jobInput","validationOptions","formSelector","openImagePopup","replace","fillUserHeader","userProfile","userName","userAbout","userAvatar","about","style","backgroundImage","avatar","value","element","evt","preventDefault","buttonSave","setLoadingState","body","JSON","stringify","prepend","finally","userPhotoLink","urlAvatarInput","patternMismatch","setCustomValidity","dataset","errorMessage","showInputError","validationMessage","isValid","setEventListeners","promises","isLoading","defaultText","arguments","undefined","loadingText","all","results","_results","user","cards","append","err"],"sourceRoot":""}